<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panda Crypto Shop</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#0f0f1e;color:#fff;min-height:100vh;position:relative;overflow-x:hidden}
body::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at 20% 30%,rgba(102,126,234,0.3) 0%,transparent 50%),radial-gradient(circle at 80% 70%,rgba(118,75,162,0.3) 0%,transparent 50%),radial-gradient(circle at 40% 80%,rgba(52,199,89,0.2) 0%,transparent 40%);z-index:0}
.bg-shapes{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;overflow:hidden;pointer-events:none}
.shape{position:absolute;border-radius:50%;opacity:0.1}
.shape1{width:300px;height:300px;background:linear-gradient(135deg,#667eea,#764ba2);top:10%;left:10%;animation:float 20s infinite ease-in-out}
.shape2{width:200px;height:200px;background:linear-gradient(135deg,#f093fb,#f5576c);top:60%;right:10%;animation:float 25s infinite ease-in-out;animation-delay:5s}
.shape3{width:150px;height:150px;background:linear-gradient(135deg,#4facfe,#00f2fe);bottom:20%;left:30%;animation:float 30s infinite ease-in-out;animation-delay:10s}
.screen{min-height:100vh;padding:20px 16px 100px;position:relative;z-index:1;transition:opacity 0.3s ease}
.panda-mascot{text-align:center;margin-bottom:20px;animation:float 3s ease-in-out infinite}
.panda-mascot svg{width:120px;height:120px;filter:drop-shadow(0 10px 30px rgba(0,0,0,0.5))}
.header{text-align:center;margin-bottom:32px}
.header h1{font-size:32px;font-weight:800;margin-bottom:8px;text-shadow:0 2px 20px rgba(255,255,255,0.3)}
.header p{color:rgba(255,255,255,0.8);font-size:16px}
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.card{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:24px 16px;cursor:pointer;border:2px solid rgba(255,255,255,0.2);text-align:center;transition:all .3s;position:relative;overflow:hidden;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:transparent}
.card::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);transition:left .5s}
.card:hover::before{left:100%}
.card:active{transform:scale(.95)}
.card.selected{border-color:#667eea;background:rgba(102,126,234,0.3);box-shadow:0 0 30px rgba(102,126,234,0.5)}
.logo{width:56px;height:56px;margin:0 auto 12px;background:rgba(255,255,255,0.9);border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:32px}
.name{font-size:16px;font-weight:700;color:#fff}
.back-btn{background:rgba(255,255,255,0.15);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.3);border-radius:12px;padding:12px 20px;font-size:15px;font-weight:600;color:#fff;cursor:pointer;margin-bottom:20px;border:none}
.service-card{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:20px;cursor:pointer;border:2px solid rgba(255,255,255,0.2);transition:all .3s;margin-bottom:12px}
.service-card.selected{border-color:#667eea;background:rgba(102,126,234,0.3);box-shadow:0 0 30px rgba(102,126,234,0.5)}
.service-top{display:flex;gap:16px;margin-bottom:12px}
.service-icon{font-size:40px}
.service-title{font-size:18px;font-weight:700;margin-bottom:6px}
.service-desc{font-size:14px;opacity:0.8}
.service-bottom{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.2)}
.service-price{font-size:24px;font-weight:800;background:linear-gradient(135deg,#4facfe,#00f2fe);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.service-badge{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:6px 12px;border-radius:10px;font-size:12px;font-weight:700}
.section-title{font-size:20px;font-weight:800;margin:24px 0 16px;text-shadow:0 2px 10px rgba(255,255,255,0.3)}
.timer{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:16px;padding:16px;margin:20px 0;text-align:center;border:2px solid rgba(255,255,255,0.2)}
.timer-label{font-size:14px;margin-bottom:8px;opacity:0.8}
.timer-display{font-size:48px;font-weight:800;color:#4facfe;font-family:monospace;text-shadow:0 0 20px rgba(79,172,254,0.5)}
.timer-display.warning{color:#ff3b30;animation:pulse 1s infinite}
.qr-box{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:24px;margin:20px 0;border:2px solid rgba(255,255,255,0.2)}
.qr-code{width:280px;height:280px;margin:20px auto;padding:20px;background:#fff;border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,0.3)}
.wallet{background:rgba(255,255,255,0.15);backdrop-filter:blur(10px);padding:16px;border-radius:12px;margin:16px 0;word-break:break-all;font-family:monospace;font-size:13px;border:1px solid rgba(255,255,255,0.3)}
.btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:14px 28px;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;margin-top:12px;box-shadow:0 4px 20px rgba(102,126,234,0.4);transition:all .3s}
.btn:active{transform:scale(.95)}
.status{text-align:center;padding:20px;margin-top:20px;background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:16px;border:2px solid rgba(255,255,255,0.2)}
.icon{font-size:64px;margin-bottom:12px}
.icon.checking{animation:spin 2s linear infinite}
.summary{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:24px;margin-top:24px;border:2px solid rgba(255,255,255,0.2)}
.summary-row{display:flex;justify-content:space-between;margin-bottom:10px;font-size:15px}
.summary-row:last-child{margin-top:16px;padding-top:16px;border-top:2px solid rgba(255,255,255,0.3);font-size:22px;font-weight:800;color:#4facfe}
.success-box{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:24px;margin-top:24px;border:2px solid rgba(255,255,255,0.2)}
.hidden{display:none!important}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideInUp{from{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}
@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.5;transform:scale(1.05)}}
@keyframes scaleUp{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}
@keyframes fadeInScale{0%{opacity:0;transform:scale(0.9)}100%{opacity:1;transform:scale(1)}}
</style>
</head>
<body>
<div class="bg-shapes">
<div class="shape shape1"></div>
<div class="shape shape2"></div>
<div class="shape shape3"></div>
</div>

<div id="s1" class="screen" style="opacity:1;display:block">
<div class="panda-mascot" style="animation:scaleUp 0.8s ease-out">
<svg viewBox="0 0 200 200">
<ellipse cx="100" cy="120" rx="50" ry="60" fill="#fff"/>
<circle cx="100" cy="70" r="45" fill="#fff"/>
<ellipse cx="70" cy="40" rx="20" ry="25" fill="#000"/>
<ellipse cx="130" cy="40" rx="20" ry="25" fill="#000"/>
<ellipse cx="85" cy="65" rx="18" ry="22" fill="#000"/>
<circle cx="88" cy="68" r="6" fill="#fff"/>
<ellipse cx="115" cy="65" rx="18" ry="22" fill="#000"/>
<circle cx="118" cy="68" r="6" fill="#fff"/>
<ellipse cx="100" cy="85" rx="8" ry="6" fill="#000"/>
<circle cx="140" cy="110" r="18" fill="#FFD700"/>
<text x="140" y="118" font-size="20" text-anchor="middle" fill="#000" font-weight="bold">‚Çø</text>
</svg>
</div>
<div class="header" style="animation:fadeIn 1s ease-out">
<h1>üêº Panda Shop</h1>
<p>–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂—É</p>
</div>
<div class="grid" style="animation:slideInUp 1.2s ease-out">
<div class="card" onclick="selectExchange('binance','Binance')"><div class="logo">üü°</div><div class="name">Binance</div></div>
<div class="card" onclick="selectExchange('bybit','Bybit')"><div class="logo">üü†</div><div class="name">Bybit</div></div>
<div class="card" onclick="selectExchange('okx','OKX')"><div class="logo">‚ö´</div><div class="name">OKX</div></div>
<div class="card" onclick="selectExchange('kraken','Kraken')"><div class="logo">üü£</div><div class="name">Kraken</div></div>
<div class="card" onclick="selectExchange('gateio','Gate.io')"><div class="logo">üü¢</div><div class="name">Gate.io</div></div>
<div class="card" onclick="selectExchange('mexc','MEXC')"><div class="logo">üîµ</div><div class="name">MEXC</div></div>
<div class="card" onclick="selectExchange('bingx','BingX')"><div class="logo">üî∑</div><div class="name">BingX</div></div>
<div class="card" onclick="selectExchange('bitget','Bitget')"><div class="logo">üí†</div><div class="name">Bitget</div></div>
<div class="card" onclick="selectExchange('kucoin','KuCoin')"><div class="logo">üü©</div><div class="name">KuCoin</div></div>
</div>
</div>

<div id="s2" class="screen" style="display:none;opacity:1">
<button class="back-btn" onclick="go(1)">‚Üê –ù–∞–∑–∞–¥ –∫ –±–∏—Ä–∂–∞–º</button>
<div class="header"><h1 id="exName">Binance</h1><p>–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</p></div>
<div class="service-card" onclick="selectService('kyc','KYC –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è','50')">
<div class="service-top"><span class="service-icon">‚úÖ</span><div><div class="service-title">KYC –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è</div><div class="service-desc">–ü–æ–ª–Ω–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–∫–∫–∞—É–Ω—Ç–∞</div></div></div>
<div class="service-bottom"><div class="service-price">$50</div><div class="service-badge">–ü–æ–ø—É–ª—è—Ä–Ω–æ</div></div>
</div>
<div class="service-card" onclick="selectService('api','–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API','35')">
<div class="service-top"><span class="service-icon">üîë</span><div><div class="service-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API</div><div class="service-desc">–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –∫–ª—é—á–µ–π</div></div></div>
<div class="service-bottom"><div class="service-price">$35</div><div class="service-badge">–ë—ã—Å—Ç—Ä–æ</div></div>
</div>
<div class="service-card" onclick="selectService('account','–ì–æ—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç','120')">
<div class="service-top"><span class="service-icon">üë§</span><div><div class="service-title">–ì–æ—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç</div><div class="service-desc">–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å –∏—Å—Ç–æ—Ä–∏–µ–π</div></div></div>
<div class="service-bottom"><div class="service-price">$120</div><div class="service-badge">Premium</div></div>
</div>
</div>

<div id="s3" class="screen" style="display:none;opacity:1">
<button class="back-btn" onclick="go(2)">‚Üê –ù–∞–∑–∞–¥ –∫ —É—Å–ª—É–≥–∞–º</button>
<div class="header"><h1>üí≥ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h1><p>–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É</p></div>
<div class="section-title">üíµ –°—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã</div>
<div class="grid">
<div class="card" onclick="selectCrypto('usdt','USDT')"><div class="logo">üíµ</div><div class="name">USDT</div></div>
<div class="card" onclick="selectCrypto('usdc','USDC')"><div class="logo">üîµ</div><div class="name">USDC</div></div>
<div class="card" onclick="selectCrypto('dai','DAI')"><div class="logo">üü°</div><div class="name">DAI</div></div>
<div class="card" onclick="selectCrypto('busd','BUSD')"><div class="logo">üü®</div><div class="name">BUSD</div></div>
</div>
<div class="section-title">üíé –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã</div>
<div class="grid">
<div class="card" onclick="selectCrypto('btc','Bitcoin')"><div class="logo">‚Çø</div><div class="name">Bitcoin</div></div>
<div class="card" onclick="selectCrypto('eth','Ethereum')"><div class="logo">Œû</div><div class="name">Ethereum</div></div>
<div class="card" onclick="selectCrypto('ton','TON')"><div class="logo">üíé</div><div class="name">TON</div></div>
<div class="card" onclick="selectCrypto('ltc','Litecoin')"><div class="logo">≈Å</div><div class="name">Litecoin</div></div>
<div class="card" onclick="selectCrypto('trx','TRON')"><div class="logo">üî∫</div><div class="name">TRON</div></div>
<div class="card" onclick="selectCrypto('bnb','BNB')"><div class="logo">üü°</div><div class="name">BNB</div></div>
<div class="card" onclick="selectCrypto('xrp','XRP')"><div class="logo">‚úï</div><div class="name">XRP</div></div>
<div class="card" onclick="selectCrypto('doge','Dogecoin')"><div class="logo">üêï</div><div class="name">Dogecoin</div></div>
</div>
<div id="networks" style="margin-top:20px;display:none">
<div class="section-title">‚ö° –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ç—å</div>
<div id="netList"></div>
</div>
<div class="summary" id="summary" style="display:none">
<div style="font-size:18px;font-weight:700;margin-bottom:16px;color:#4facfe">üìã –ò—Ç–æ–≥–æ</div>
<div class="summary-row"><span>–ë–∏—Ä–∂–∞:</span><span id="sumEx"></span></div>
<div class="summary-row"><span>–£—Å–ª—É–≥–∞:</span><span id="sumSrv"></span></div>
<div class="summary-row"><span>–û–ø–ª–∞—Ç–∞:</span><span id="sumCrypto"></span></div>
<div class="summary-row"><span>–°–µ—Ç—å:</span><span id="sumNet"></span></div>
<div class="summary-row"><span>–ò—Ç–æ–≥–æ:</span><span id="sumPrice"></span></div>
</div>
</div>

<div id="s4" class="screen" style="display:none;opacity:1">
<div class="timer"><div class="timer-label">‚è∞ –û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É</div><div class="timer-display" id="timer">10:00</div></div>
<div class="header"><h1>üì± –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥</h1><p>–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–æ—á–Ω—É—é —Å—É–º–º—É –Ω–∞ –∞–¥—Ä–µ—Å</p></div>
<div class="qr-box">
<div class="qr-code" id="qr"></div>
<div class="wallet" id="addr">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–¥—Ä–µ—Å–∞...</div>
<button class="btn" onclick="copy()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
<div class="status">
<div class="icon checking" id="ico">üîÑ</div>
<div style="font-size:16px;font-weight:600;margin-bottom:8px" id="txt">–ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–æ–∫—á–µ–π–Ω...</div>
<div style="font-size:13px;opacity:0.8">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥</div>
<div style="margin-top:16px;font-size:28px;font-weight:800;color:#4facfe" id="amt">$0</div>
</div>
</div>
</div>

<div id="s5" class="screen" style="display:none;opacity:1">
<div style="text-align:center;padding:40px 20px">
<div class="panda-mascot">
<svg viewBox="0 0 120 120">
<circle cx="60" cy="60" r="50" fill="#fff"/>
<ellipse cx="45" cy="45" rx="12" ry="15" fill="#000"/>
<ellipse cx="75" cy="45" rx="12" ry="15" fill="#000"/>
<path d="M 40 70 Q 60 85 80 70" stroke="#000" stroke-width="3" fill="none"/>
<circle cx="90" cy="50" r="15" fill="#34c759"/>
<text x="90" y="58" font-size="18" text-anchor="middle" fill="#fff" font-weight="bold">‚úì</text>
</svg>
</div>
<div style="font-size:100px;margin:20px 0">‚úÖ</div>
<div style="font-size:32px;font-weight:800;margin-bottom:12px">–û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!</div>
<div style="font-size:16px;opacity:0.9;margin-bottom:24px">–í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –∏ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 —á–∞—Å–æ–≤</div>
<div class="success-box">
<div style="font-size:18px;font-weight:700;margin-bottom:16px;color:#4facfe">üìã –î–µ—Ç–∞–ª–∏ –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞</div>
<div class="summary-row"><span>–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</span><span id="oid" style="font-family:monospace"></span></div>
<div class="summary-row"><span>–ë–∏—Ä–∂–∞:</span><span id="oex"></span></div>
<div class="summary-row"><span>–£—Å–ª—É–≥–∞:</span><span id="osrv"></span></div>
<div class="summary-row"><span>–û–ø–ª–∞—á–µ–Ω–æ:</span><span id="ocrypto"></span></div>
<div class="summary-row"><span>–°—É–º–º–∞:</span><span id="oprice" style="color:#34c759"></span></div>
<div style="margin-top:24px;padding-top:24px;border-top:2px solid rgba(255,255,255,0.3);text-align:center">
<div style="font-size:14px;opacity:0.8">–ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</div>
<div style="font-size:14px;opacity:0.8;margin-top:8px">–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É! üêº</div>
</div>
</div>
</div>
</div>

<script>
// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
var tg = window.Telegram.WebApp;
tg.expand();
tg.BackButton.show();

var d = {
    ex: null,
    exName: null,
    srv: null,
    srvName: null,
    price: null,
    crypto: null,
    cryptoName: null,
    net: null,
    netName: null,
    addr: null,
    oid: null
};
var timer = 600;
var timerInt;
var checkInt;
var checkCount = 0;

// –î–∞–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–æ–≤ –∏ —Å–µ—Ç–µ–π
var wallets = {
    'usdt-trc20': 'TXm6gEHhZXjFhzPHpHKVGYHqXeDvXxXxXx',
    'usdt-erc20': '0x742d35Cc6634C0532925a3b844Bc9e7595f0f0f0',
    'usdt-bep20': '0x742d35Cc6634C0532925a3b844Bc9e7595f0f0f0',
    'usdc-erc20': '0x742d35Cc6634C0532925a3b844Bc9e7595f0f0f0',
    'usdc-polygon': '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174',
    'dai-erc20': '0x6B175474E89094C44Da98b954EedeAC495271d0F',
    'busd-bep20': '0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56',
    'btc-bitcoin': 'bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh',
    'eth-ethereum': '0x742d35Cc6634C0532925a3b844Bc9e7595f0f0f0',
    'ton-ton': 'EQDtFpEwcFAEcRe5mLVh2N6C0x-_hJEM7W61_JLnSF74p4q2',
    'ltc-litecoin': 'ltc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh',
    'trx-tron': 'TXm6gEHhZXjFhzPHpHKVGYHqXeDvXxXxXx',
    'bnb-bep20': '0x742d35Cc6634C0532925a3b844Bc9e7595f0f0f0',
    'xrp-ripple': 'rXRippleAddressExample123456789',
    'doge-dogecoin': 'DDogeAddressExample123456789'
};

var nets = {
    usdt: [
        {id: 'trc20', n: 'TRC20 (TRON)', d: '–ù–∏–∑–∫–∞—è –∫–æ–º–∏—Å—Å–∏—è ~$1'},
        {id: 'erc20', n: 'ERC20 (Ethereum)', d: '–í—ã—Å–æ–∫–∞—è –∫–æ–º–∏—Å—Å–∏—è ~$15'},
        {id: 'bep20', n: 'BEP20 (BSC)', d: '–ù–∏–∑–∫–∞—è –∫–æ–º–∏—Å—Å–∏—è ~$0.5'}
    ],
    usdc: [
        {id: 'erc20', n: 'ERC20 (Ethereum)', d: '–û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç—å'},
        {id: 'polygon', n: 'Polygon', d: '–û—á–µ–Ω—å –¥–µ—à–µ–≤–æ'}
    ],
    dai: [
        {id: 'erc20', n: 'ERC20 (Ethereum)', d: '–û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç—å'}
    ],
    busd: [
        {id: 'bep20', n: 'BEP20 (BSC)', d: 'Binance Smart Chain'}
    ],
    btc: [
        {id: 'bitcoin', n: 'Bitcoin', d: '–û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç—å BTC'}
    ],
    eth: [
        {id: 'ethereum', n: 'Ethereum', d: '–û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç—å ETH'}
    ],
    ton: [
        {id: 'ton', n: 'TON', d: 'The Open Network'}
    ],
    ltc: [
        {id: 'litecoin', n: 'Litecoin', d: '–û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç—å LTC'}
    ],
    trx: [
        {id: 'tron', n: 'TRON', d: '–û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç—å TRX'}
    ],
    bnb: [
        {id: 'bep20', n: 'BEP20 (BSC)', d: 'Binance Smart Chain'}
    ],
    xrp: [
        {id: 'ripple', n: 'XRP Ledger', d: 'Ripple Network'}
    ],
    doge: [
        {id: 'dogecoin', n: 'Dogecoin', d: 'DOGE Network'}
    ]
};

// –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –±–∏—Ä–∂–∏
function selectExchange(exId, exName) {
    console.log('Exchange selected:', exId, exName);
    d.ex = exId;
    d.exName = exName;
    document.getElementById('exName').textContent = exName;
    go(2);
}

// –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ —É—Å–ª—É–≥–∏
function selectService(srvId, srvName, price) {
    console.log('Service selected:', srvId, srvName, price);
    d.srv = srvId;
    d.srvName = srvName;
    d.price = price;
    setTimeout(function() {
        go(3);
    }, 300);
}

// –§—É–Ω–∫—Ü–∏—è –≤—ã–±–æ—Ä–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
function selectCrypto(cryptoId, cryptoName) {
    console.log('Crypto selected:', cryptoId, cryptoName);
    d.crypto = cryptoId;
    d.cryptoName = cryptoName;
    showNets();
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–µ—Ç–µ–π
function showNets() {
    var list = document.getElementById('netList');
    list.innerHTML = '';
    
    if (!nets[d.crypto]) {
        console.error('No networks found for crypto:', d.crypto);
        return;
    }
    
    nets[d.crypto].forEach(function(x) {
        var div = document.createElement('div');
        div.className = 'card';
        div.style.marginBottom = '10px';
        div.innerHTML = '<div class="name">' + x.n + '</div><div style="font-size:12px;opacity:0.8;margin-top:4px">' + x.d + '</div>';
        div.onclick = function() {
            var allNets = document.querySelectorAll('#netList .card');
            for (var i = 0; i < allNets.length; i++) {
                allNets[i].classList.remove('selected');
            }
            this.classList.add('selected');
            d.net = x.id;
            d.netName = x.n;
            showSummary();
        };
        list.appendChild(div);
    });
    
    var networkSection = document.getElementById('networks');
    networkSection.style.display = 'block';
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∏—Ç–æ–≥–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
function showSummary() {
    document.getElementById('sumEx').textContent = d.exName;
    document.getElementById('sumSrv').textContent = d.srvName;
    document.getElementById('sumCrypto').textContent = d.cryptoName;
    document.getElementById('sumNet').textContent = d.netName;
    document.getElementById('sumPrice').textContent = '$' + d.price;
    
    var summaryBox = document.getElementById('summary');
    summaryBox.style.display = 'block';
    summaryBox.scrollIntoView({behavior: 'smooth', block: 'nearest'});
    
    tg.MainButton.setText('üí≥ –û–ø–ª–∞—Ç–∏—Ç—å $' + d.price);
    tg.MainButton.show();
}

// –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤
function go(s) {
    console.log('Going to screen:', s);
    var allScreens = document.getElementsByClassName('screen');
    for (var i = 0; i < allScreens.length; i++) {
        allScreens[i].style.display = 'none';
    }
    
    var target = document.getElementById('s' + s);
    if (target) {
        target.style.display = 'block';
        console.log('Screen s' + s + ' shown');
    } else {
        console.error('Screen s' + s + ' not found!');
    }
    
    window.scrollTo(0, 0);
    if (s < 4) {
        tg.MainButton.hide();
    }
}

// –¢–∞–π–º–µ—Ä –æ–ø–ª–∞—Ç—ã
function startTimer() {
    timerInt = setInterval(function() {
        timer--;
        var m = Math.floor(timer / 60);
        var sec = timer % 60;
        var display = m + ':' + (sec < 10 ? '0' : '') + sec;
        document.getElementById('timer').textContent = display;
        
        if (timer < 120) {
            document.getElementById('timer').classList.add('warning');
        }
        
        if (timer <= 0) {
            clearInterval(timerInt);
            clearInterval(checkInt);
            tg.showAlert('‚è∞ –í—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
            go(1);
        }
    }, 1000);
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
function checkPayment() {
    checkInt = setInterval(function() {
        checkCount++;
        document.getElementById('txt').textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç–µ–∂–∞ #' + checkCount + '...';
        document.getElementById('ico').textContent = 'üîç';
        
        if (checkCount >= 6) {
            clearInterval(checkInt);
            clearInterval(timerInt);
            paymentConfirmed();
        }
    }, 10000);
}

// –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
function paymentConfirmed() {
    document.getElementById('ico').className = 'icon';
    document.getElementById('ico').textContent = '‚úÖ';
    document.getElementById('txt').textContent = '–ü–ª–∞—Ç–µ–∂ –ø–æ–ª—É—á–µ–Ω!';
    
    setTimeout(function() {
        go(5);
        document.getElementById('oid').textContent = d.oid;
        document.getElementById('oex').textContent = d.exName;
        document.getElementById('osrv').textContent = d.srvName;
        document.getElementById('ocrypto').textContent = d.cryptoName + ' (' + d.netName + ')';
        document.getElementById('oprice').textContent = '$' + d.price;
        
        tg.sendData(JSON.stringify(d));
        setTimeout(function() {
            tg.close();
        }, 8000);
    }, 2000);
}

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞
function genQR() {
    d.oid = 'ORD-' + Date.now();
    var walletKey = d.crypto + '-' + d.net;
    
    if (!wallets[walletKey]) {
        tg.showAlert('‚ùå –û—à–∏–±–∫–∞: –Ω–µ –Ω–∞–π–¥–µ–Ω –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞');
        return;
    }
    
    d.addr = wallets[walletKey];
    document.getElementById('qr').innerHTML = '';
    
    new QRCode(document.getElementById('qr'), {
        text: d.addr,
        width: 240,
        height: 240,
        colorDark: '#000',
        colorLight: '#fff'
    });
    
    document.getElementById('addr').textContent = d.addr;
    document.getElementById('amt').textContent = '$' + d.price;
    
    startTimer();
    checkPayment();
}

// –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
function copy() {
    if (!d.addr) {
        tg.showAlert('‚ùå –ê–¥—Ä–µ—Å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
        return;
    }
    
    navigator.clipboard.writeText(d.addr).then(function() {
        tg.showAlert('‚úÖ –ê–¥—Ä–µ—Å —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
    }).catch(function() {
        tg.showAlert('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å');
    });
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ Telegram
tg.MainButton.onClick(function() {
    if (d.ex && d.srv && d.crypto && d.net) {
        go(4);
        tg.MainButton.hide();
        genQR();
    } else {
        tg.showAlert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
    }
});

tg.BackButton.onClick(function() {
    var visibleScreen = Array.from(document.querySelectorAll('.screen')).find(function(screen) {
        return screen.style.display === 'block' || screen.style.display === '';
    });
    
    if (!visibleScreen) return;
    
    var cur = visibleScreen.id;
    if (cur === 's1') {
        tg.close();
    } else if (cur === 's2') {
        go(1);
    } else if (cur === 's3') {
        go(2);
    } else if (cur === 's4') {
        clearInterval(timerInt);
        clearInterval(checkInt);
        timer = 600;
        checkCount = 0;
        go(3);
        tg.MainButton.show();
    } else if (cur === 's5') {
        tg.close();
    }
});
</script>
</body>
</html>
